<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Netgrif Components Core library Documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Netgrif Components Core library Documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li >UserService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>projects/netgrif-components-core/src/lib/user/services/user.service.ts</code>
        </p>





            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_anonymousUserChange$" >_anonymousUserChange$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_loginCalled" >_loginCalled</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_subAnonym" >_subAnonym</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_subAuth" >_subAuth</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_user" >_user</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_userChange$" >_userChange$</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                    <span class="modifier">Readonly</span>
                                <a href="#GLOBAL_ROLE_PREFIX" >GLOBAL_ROLE_PREFIX</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#clearUser" >clearUser</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#emptyUser" >emptyUser</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#hasAuthority" >hasAuthority</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#hasRole" >hasRole</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#hasRoleById" >hasRoleById</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#hasRoleByIdentifier" >hasRoleByIdentifier</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#hasRoleByName" >hasRoleByName</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#isCurrentUserEmpty" >isCurrentUserEmpty</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#isUserEmpty" >isUserEmpty</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#loadPublicUser" >loadPublicUser</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#loadUser" >loadUser</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#login" >login</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#logout" >logout</a>
                            </li>
                            <li>
                                <a href="#ngOnDestroy" >ngOnDestroy</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#publishAnonymousUserChange" >publishAnonymousUserChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#publishUserChange" >publishUserChange</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#reload" >reload</a>
                            </li>
                        </ul>
                    </td>
                </tr>





                    <tr>
                        <td class="col-md-4">
                            <h6><b>Accessors</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                    <a href="#user" >user</a>
                                </li>
                                <li>
                                    <a href="#user$" >user$</a>
                                </li>
                                <li>
                                    <a href="#anonymousUser" >anonymousUser</a>
                                </li>
                                <li>
                                    <a href="#anonymousUser$" >anonymousUser$</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(_authService: <a href="../injectables/AuthenticationService.html" target="_self">AuthenticationService</a>, _userResource: <a href="../injectables/UserResourceService.html" target="_self">UserResourceService</a>, _userTransform: <a href="../injectables/UserTransformer.html" target="_self">UserTransformer</a>, _log: <a href="../injectables/LoggerService.html" target="_self">LoggerService</a>, _session: <a href="../injectables/SessionService.html" target="_self">SessionService</a>, _anonymousService: <a href="../injectables/AnonymousService.html" target="_self">AnonymousService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:29</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>_authService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/AuthenticationService.html" target="_self" >AuthenticationService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_userResource</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/UserResourceService.html" target="_self" >UserResourceService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_userTransform</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/UserTransformer.html" target="_self" >UserTransformer</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_log</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/LoggerService.html" target="_self" >LoggerService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_session</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/SessionService.html" target="_self" >SessionService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_anonymousService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/AnonymousService.html" target="_self" >AnonymousService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="clearUser"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>clearUser</b></span>
                        <a href="#clearUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>clearUser()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="213"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:213</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="emptyUser"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>emptyUser</b></span>
                        <a href="#emptyUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>emptyUser()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="179"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:179</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >any</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasAuthority"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>hasAuthority</b></span>
                        <a href="#hasAuthority"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasAuthority(authority: Array<string> | string)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="90"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:90</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Check if user has specified authority.
                   Method make intersection of the provided authorities and user&#39;s authorities.
                   If calculated intersection isn&#39;t empty returns true, otherwise false.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>authority</td>
                                    <td>
                                            <code>Array&lt;string&gt; | string</code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <ul>
<li>If provided authority is array of authorities.
 Method make intersection of the provided authorities and user&#39;s authorities.
 If calculated intersection isn&#39;t empty returns true, otherwise false.</li>
</ul>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasRole"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>hasRole</b></span>
                        <a href="#hasRole"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasRole(role: <a href="../interfaces/ProcessRole.html" target="_self">ProcessRole</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="102"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:102</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>role</td>
                                    <td>
                                                <code><a href="../interfaces/ProcessRole.html" target="_self" >ProcessRole</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasRoleById"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>hasRoleById</b></span>
                        <a href="#hasRoleById"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasRoleById(roleStringId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="114"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:114</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Checks whether the user has role with a specific stringId</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>roleStringId</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>ID of the role we want to check</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasRoleByIdentifier"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>hasRoleByIdentifier</b></span>
                        <a href="#hasRoleByIdentifier"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasRoleByIdentifier(roleIdentifier: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, netIdentifier: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="128"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:128</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Checks whether the user has a role with the specified identifier in a process with the specified identifier (any version),
or if the role is global (with prefix &#39;global_&#39;).</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>roleIdentifier</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>identifier (import ID) of the role we want to check</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>netIdentifier</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>identifier (import ID) of the process the role is defined in</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="hasRoleByName"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>hasRoleByName</b></span>
                        <a href="#hasRoleByName"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>hasRoleByName(roleName: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, netIdentifier: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="147"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:147</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Checks whether the user has role with the specified name in a process with the specified identifier (any version)</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>roleName</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>name of the role we want to check</p>

                                    </td>
                                </tr>
                                <tr>
                                    <td>netIdentifier</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>identifier (import ID) of the process the role is defined in</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isCurrentUserEmpty"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>isCurrentUserEmpty</b></span>
                        <a href="#isCurrentUserEmpty"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isCurrentUserEmpty()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="221"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:221</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="isUserEmpty"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>isUserEmpty</b></span>
                        <a href="#isUserEmpty"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>isUserEmpty(user: <a href="../classes/User.html" target="_self">User</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="217"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:217</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>user</td>
                                    <td>
                                                <code><a href="../classes/User.html" target="_self" >User</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadPublicUser"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>loadPublicUser</b></span>
                        <a href="#loadPublicUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadPublicUser()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="200"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:200</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="loadUser"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>loadUser</b></span>
                        <a href="#loadUser"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>loadUser()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="183"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:183</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="login"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>login</b></span>
                        <a href="#login"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>login(credentials: <a href="../interfaces/Credentials.html" target="_self">Credentials</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="155"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:155</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>credentials</td>
                                    <td>
                                                <code><a href="../interfaces/Credentials.html" target="_self" >Credentials</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classes/User.html" target="_self" >Observable&lt;User&gt;</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="logout"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>logout</b></span>
                        <a href="#logout"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>logout()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="166"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:166</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>    <code>Observable&lt;object&gt;</code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnDestroy"></a>
                    <span class="name">
                        <span ><b>ngOnDestroy</b></span>
                        <a href="#ngOnDestroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnDestroy()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="77"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:77</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="publishAnonymousUserChange"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>publishAnonymousUserChange</b></span>
                        <a href="#publishAnonymousUserChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>publishAnonymousUserChange()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="229"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:229</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="publishUserChange"></a>
                    <span class="name">
                        <span class="modifier">Protected</span>
                        <span ><b>publishUserChange</b></span>
                        <a href="#publishUserChange"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>publishUserChange()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="225"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:225</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="reload"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>reload</b></span>
                        <a href="#reload"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>reload()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="175"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:175</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_anonymousUserChange$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_anonymousUserChange$</b></span>
                        <a href="#_anonymousUserChange$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/User.html" target="_self" >ReplaySubject&lt;User&gt;</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="23" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:23</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_loginCalled"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_loginCalled</b></span>
                        <a href="#_loginCalled"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="24" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:24</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_subAnonym"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_subAnonym</b></span>
                        <a href="#_subAnonym"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subscription</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="26" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:26</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_subAuth"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_subAuth</b></span>
                        <a href="#_subAuth"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>Subscription</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="25" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:25</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_user"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_user</b></span>
                        <a href="#_user"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/User.html" target="_self" >User</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="21" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:21</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_userChange$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_userChange$</b></span>
                        <a href="#_userChange$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../classes/User.html" target="_self" >ReplaySubject&lt;User&gt;</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="22" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:22</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="GLOBAL_ROLE_PREFIX"></a>
                    <span class="name">
                            <span class="modifier">Public</span>
                            <span class="modifier">Readonly</span>
                        <span ><b>GLOBAL_ROLE_PREFIX</b></span>
                        <a href="#GLOBAL_ROLE_PREFIX"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Default value : </i><code>&#x27;global_&#x27;</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="29" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:29</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

            <section>
    <h3 id="accessors">
        Accessors
    </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="user"></a>
                        <span class="name"><b>user</b><a href="#user"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>user()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="61" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:61</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="user$"></a>
                        <span class="name"><b>user$</b><a href="#user$"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>user$()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="65" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:65</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="anonymousUser"></a>
                        <span class="name"><b>anonymousUser</b><a href="#anonymousUser"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>anonymousUser()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="69" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:69</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="anonymousUser$"></a>
                        <span class="name"><b>anonymousUser$</b><a href="#anonymousUser$"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>anonymousUser$()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="73" class="link-to-prism">projects/netgrif-components-core/src/lib/user/services/user.service.ts:73</a></div>
                                </td>
                            </tr>

            </tbody>
        </table>
</section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Injectable, OnDestroy} from &#x27;@angular/core&#x27;;
import {Observable, ReplaySubject, Subscription} from &#x27;rxjs&#x27;;
import {ProcessRole} from &#x27;../../resources/interface/process-role&#x27;;
import {User} from &#x27;../models/user&#x27;;
import {Credentials} from &#x27;../../authentication/models/credentials&#x27;;
import {take, tap} from &#x27;rxjs/operators&#x27;;
import {AuthenticationService} from &#x27;../../authentication/services/authentication/authentication.service&#x27;;
import {UserResourceService} from &#x27;../../resources/engine-endpoint/user-resource.service&#x27;;
import {UserTransformer} from &#x27;../../authentication/models/user.transformer&#x27;;
import {LoggerService} from &#x27;../../logger/services/logger.service&#x27;;
import {HttpErrorResponse} from &#x27;@angular/common/http&#x27;;
import {SessionService} from &#x27;../../authentication/session/services/session.service&#x27;;
import {UserResource} from &#x27;../../resources/interface/user-resource&#x27;;
import {AnonymousService} from &#x27;../../authentication/anonymous/anonymous.service&#x27;;

@Injectable({
    providedIn: &#x27;root&#x27;
})
export class UserService implements OnDestroy {

    protected _user: User;
    protected _userChange$: ReplaySubject&lt;User&gt;;
    protected _anonymousUserChange$: ReplaySubject&lt;User&gt;;
    protected _loginCalled: boolean;
    protected _subAuth: Subscription;
    protected _subAnonym: Subscription;
    private _publicLoadCalled: boolean;

    public readonly GLOBAL_ROLE_PREFIX &#x3D; &#x27;global_&#x27;;

    constructor(protected _authService: AuthenticationService,
                protected _userResource: UserResourceService,
                protected _userTransform: UserTransformer,
                protected _log: LoggerService,
                protected _session: SessionService,
                protected _anonymousService: AnonymousService) {
        this._user &#x3D; this.emptyUser();
        this._loginCalled &#x3D; false;
        this._userChange$ &#x3D; new ReplaySubject&lt;User&gt;(1);
        this._anonymousUserChange$ &#x3D; new ReplaySubject&lt;User&gt;(1);
        setTimeout(() &#x3D;&gt; {
            this._subAuth &#x3D; this._authService.authenticated$.subscribe(auth &#x3D;&gt; {
                if (auth &amp;&amp; !this._loginCalled) {
                    this.loadUser();
                } else if (!auth) {
                    this.clearUser();
                    this.publishUserChange();
                }
            });
        });
        this._subAnonym &#x3D; this._anonymousService.tokenSet.subscribe(token &#x3D;&gt; {
            if (token) {
                this.loadPublicUser();
            } else {
                this.clearUser();
                this.publishAnonymousUserChange();
            }
        });
    }

    get user() {
        return this._user;
    }

    get user$(): Observable&lt;User&gt; {
        return this._userChange$.asObservable();
    }

    get anonymousUser(): User {
        return this.anonymousUser;
    }

    get anonymousUser$(): Observable&lt;User&gt; {
        return this._anonymousUserChange$.asObservable();
    }

    ngOnDestroy(): void {
        this._userChange$.complete();
        this._anonymousUserChange$.complete();
        this._subAuth.unsubscribe();
        this._subAnonym.unsubscribe();
    }

    /**
     * Check if user has specified authority.
     * @param authority - If provided authority is array of authorities.
     *                    Method make intersection of the provided authorities and user&#x27;s authorities.
     *                    If calculated intersection isn&#x27;t empty returns true, otherwise false.
     */
    public hasAuthority(authority: Array&lt;string&gt; | string): boolean {
        const user &#x3D; this._user.getSelfOrImpersonated();
        if (!authority || !user.authorities) {
            return false;
        }
        if (authority instanceof Array) {
            return authority.some(a &#x3D;&gt; user.authorities.some(u &#x3D;&gt; u &#x3D;&#x3D;&#x3D; a));
        } else {
            return user.authorities.some(a &#x3D;&gt; a &#x3D;&#x3D;&#x3D; authority);
        }
    }

    public hasRole(role: ProcessRole): boolean {
        const user &#x3D; this._user.getSelfOrImpersonated();
        if (!role || !user.roles) {
            return false;
        }
        return user.roles.some(r &#x3D;&gt; r &#x3D;&#x3D;&#x3D; role);
    }

    /**
     * Checks whether the user has role with a specific stringId
     * @param roleStringId ID of the role we want to check
     */
    public hasRoleById(roleStringId: string): boolean {
        const user &#x3D; this._user.getSelfOrImpersonated();
        if (!roleStringId || !user.roles) {
            return false;
        }
        return user.roles.some(r &#x3D;&gt; r.stringId &#x3D;&#x3D;&#x3D; roleStringId);
    }

    /**
     * Checks whether the user has a role with the specified identifier in a process with the specified identifier (any version),
     * or if the role is global (with prefix &#x27;global_&#x27;).
     * @param roleIdentifier identifier (import ID) of the role we want to check
     * @param netIdentifier identifier (import ID) of the process the role is defined in
     */
    public hasRoleByIdentifier(roleIdentifier: string, netIdentifier: string): boolean {
        const user &#x3D; this._user.getSelfOrImpersonated();
        if (!roleIdentifier || !user.roles) {
            return false;
        }

        return user.roles.some(r &#x3D;&gt; {
            const matchesRole &#x3D; r.importId &#x3D;&#x3D;&#x3D; roleIdentifier;
            const isGlobalRole &#x3D; r.importId.startsWith(this.GLOBAL_ROLE_PREFIX);
            const matchesNet &#x3D; r.netImportId &#x3D;&#x3D;&#x3D; netIdentifier;
            return matchesRole &amp;&amp; (isGlobalRole || matchesNet);
        });
    }

    /**
     * Checks whether the user has role with the specified name in a process with the specified identifier (any version)
     * @param roleName name of the role we want to check
     * @param netIdentifier identifier (import ID) of the process the role is defined in
     */
    public hasRoleByName(roleName: string, netIdentifier: string): boolean {
        const user &#x3D; this._user.getSelfOrImpersonated();
        if (!roleName || !netIdentifier || !user.roles) {
            return false;
        }
        return user.roles.some(r &#x3D;&gt; r.netImportId &#x3D;&#x3D;&#x3D; netIdentifier &amp;&amp; r.name &#x3D;&#x3D;&#x3D; roleName);
    }

    public login(credentials: Credentials): Observable&lt;User&gt; {
        this._loginCalled &#x3D; true;
        return this._authService.login(credentials).pipe(
            tap((authUser: User) &#x3D;&gt; {
                this._user &#x3D; authUser;
                this._loginCalled &#x3D; false;
                this.publishUserChange();
            })
        );
    }

    public logout(): Observable&lt;object&gt; {
        return this._authService.logout().pipe(
            tap(() &#x3D;&gt; {
                this._user &#x3D; this.emptyUser();
                this.publishUserChange();
            })
        );
    }

    public reload(): void {
        this.loadUser();
    }

    protected emptyUser() {
        return new User(&#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, [], [], [], []);
    }

    protected loadUser(): void {
        this._userResource.getLoggedUser().pipe(take(1)).subscribe((user: UserResource) &#x3D;&gt; {
            if (user) {
                const backendUser &#x3D; {...user, id: user.id.toString()};
                this._user &#x3D; this._userTransform.transform(backendUser);
                this.publishUserChange();
            }
        }, error &#x3D;&gt; {
            if (error instanceof HttpErrorResponse &amp;&amp; error.status &#x3D;&#x3D;&#x3D; 401) {
                this._log.debug(&#x27;Authentication token is invalid. Clearing stream&#x27;);
                this._session.clear();
            } else {
                this._log.error(&#x27;Loading logged user has failed! Initialisation has not be completed successfully!&#x27;, error);
            }
        });
    }

    public loadPublicUser(): void {
        this._userResource.getPublicLoggedUser().pipe(take(1)).subscribe((user: UserResource) &#x3D;&gt; {
            if (user) {
                const backendUser &#x3D; {...user, id: user.id.toString()};
                this._user &#x3D; this._userTransform.transform(backendUser);
                this.publishAnonymousUserChange();
            }
        }, error &#x3D;&gt; {
            this._log.error(&#x27;Loading logged user has failed! Initialisation has not be completed successfully!&#x27;, error);
            this._publicLoadCalled &#x3D; false;
        });
    }

    public clearUser() {
        this._user &#x3D; this.emptyUser();
    }

    public isUserEmpty(user: User): boolean {
        return !user || (!user.id &amp;&amp; user.roles.length &#x3D;&#x3D;&#x3D; 0);
    }

    public isCurrentUserEmpty(): boolean {
        return this.isUserEmpty(this.user)
    }

    protected publishUserChange(): void {
        this._userChange$.next(this.user);
    }

    protected publishAnonymousUserChange(): void {
        this._anonymousUserChange$.next(this.user);
    }
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'UserService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       
       <script type="module" src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
