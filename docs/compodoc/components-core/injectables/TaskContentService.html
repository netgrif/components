<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Netgrif Components Core library Documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css" media="(prefers-color-scheme: dark)">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">Netgrif Components Core library Documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li >TaskContentService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts</code>
        </p>


            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>Acts as a communication interface between the Component that renders Task content and it&#39;s parent Component.
Also provides some general functionality that is needed when working with task content.</p>
<p>Notable example of a parent Component is the <a href="../components/AbstractTaskPanelComponent.html">AbstractTaskPanelComponent</a>.</p>
<p>Notable example of a task content renderer is the <a href="../components/AbstractTaskContentComponent.html">AbstractTaskContentComponent</a>.</p>

            </p>



            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_isExpanding$" >_isExpanding$</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_task" >_task</a>
                            </li>
                            <li>
                                    <span class="modifier">Protected</span>
                                <a href="#_taskDataReloadRequest$" >_taskDataReloadRequest$</a>
                            </li>
                            <li>
                                <a href="#$shouldCreate" >$shouldCreate</a>
                            </li>
                            <li>
                                <a href="#$shouldCreateCounter" >$shouldCreateCounter</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#blockFields" >blockFields</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#expansionFinished" >expansionFinished</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#expansionStarted" >expansionStarted</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getInvalidTaskData" >getInvalidTaskData</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#getReferencedFieldTask" >getReferencedFieldTask</a>
                            </li>
                            <li>
                                <a href="#ngOnDestroy" >ngOnDestroy</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#performFrontendAction" >performFrontendAction</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#updateFromChangedFields" >updateFromChangedFields</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#updateStateData" >updateStateData</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#validateDynamicEnumField" >validateDynamicEnumField</a>
                            </li>
                            <li>
                                    <span class="modifier">Public</span>
                                <a href="#validateTaskData" >validateTaskData</a>
                            </li>
                        </ul>
                    </td>
                </tr>





                    <tr>
                        <td class="col-md-4">
                            <h6><b>Accessors</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                    <a href="#task" >task</a>
                                </li>
                                <li>
                                    <a href="#task$" >task$</a>
                                </li>
                                <li>
                                    <a href="#taskDataReloadRequest$" >taskDataReloadRequest$</a>
                                </li>
                                <li>
                                    <a href="#taskFieldsIndex" >taskFieldsIndex</a>
                                </li>
                                <li>
                                    <a href="#referencedTaskAndCaseIds" >referencedTaskAndCaseIds</a>
                                </li>
                                <li>
                                    <a href="#isExpanding" >isExpanding</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                                <span class="modifier">Protected</span>
                        <code>constructor(_fieldConverterService: <a href="../injectables/FieldConverterService.html" target="_self">FieldConverterService</a>, _snackBarService: <a href="../injectables/SnackBarService.html" target="_self">SnackBarService</a>, _translate: TranslateService, _logger: <a href="../injectables/LoggerService.html" target="_self">LoggerService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="41" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:41</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>_fieldConverterService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/FieldConverterService.html" target="_self" >FieldConverterService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_snackBarService</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/SnackBarService.html" target="_self" >SnackBarService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_translate</td>
                                                  
                                                        <td>
                                                                    <code>TranslateService</code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>_logger</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/LoggerService.html" target="_self" >LoggerService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="blockFields"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>blockFields</b></span>
                        <a href="#blockFields"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>blockFields(blockingState: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank">boolean</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="195"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:195</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Changes the blocking state of all fields in the managed Task.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>blockingState</td>
                                    <td>
                                                <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>whether the field should be blocked or not</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="expansionFinished"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>expansionFinished</b></span>
                        <a href="#expansionFinished"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>expansionFinished()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="123"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:123</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Changes the state of the task content to <code>not expanding</code>.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="expansionStarted"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>expansionStarted</b></span>
                        <a href="#expansionStarted"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>expansionStarted()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="116"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:116</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Changes the state of the task content to <code>expanding</code>.</p>
</div>

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getInvalidTaskData"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>getInvalidTaskData</b></span>
                        <a href="#getInvalidTaskData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getInvalidTaskData()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="155"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:155</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Finds invalid data of task</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="../classess/DataField.html" target="_self" >Array&lt;DataField&lt;any&gt;&gt;</a></code>

                    </div>
                    <div class="io-description">
                        <p>array of invalid datafields</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getReferencedFieldTask"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>getReferencedFieldTask</b></span>
                        <a href="#getReferencedFieldTask"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getReferencedFieldTask(field)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="338"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:338</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>field</td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="ngOnDestroy"></a>
                    <span class="name">
                        <span ><b>ngOnDestroy</b></span>
                        <a href="#ngOnDestroy"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>ngOnDestroy()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="54"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:54</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="performFrontendAction"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>performFrontendAction</b></span>
                        <a href="#performFrontendAction"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>performFrontendAction(frontendAction: <a href="../undefineds/FrontendActions.html" target="_self">FrontendActions</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="332"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:332</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Performs the specific frontend action.</p>
<p>A prototype implementation of frontend actions.</p>
<p>The specifics are subject to change. It is very likely that this method will be moved to a different service.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>frontendAction</td>
                                    <td>
                                                <code><a href="../miscellaneous/typealiases.html#FrontendActions" target="_self" >FrontendActions</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>the action that should be performed.</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateFromChangedFields"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>updateFromChangedFields</b></span>
                        <a href="#updateFromChangedFields"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateFromChangedFields(chFields: <a href="../interfaces/ChangedFields.html" target="_self">ChangedFields</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="220"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:220</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Updates the properties of fields in the managed task based on a delta of changes from previous state.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                    <td>Description</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>chFields</td>
                                    <td>
                                                <code><a href="../interfaces/ChangedFields.html" target="_self" >ChangedFields</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                    <td>
                                        <p>object containing the delta of the changes from the previous state</p>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="updateStateData"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>updateStateData</b></span>
                        <a href="#updateStateData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>updateStateData(eventOutcome: <a href="../interfaces/TaskEventOutcome.html" target="_self">TaskEventOutcome</a>)</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="208"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:208</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Clears the assignee, start date and finish date from the managed Task.</p>
</div>

                    <div class="io-description">
                        <b>Parameters :</b>
                        <table class="params">
                            <thead>
                                <tr>
                                    <td>Name</td>
                                    <td>Type</td>
                                    <td>Optional</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>eventOutcome</td>
                                    <td>
                                                <code><a href="../interfaces/TaskEventOutcome.html" target="_self" >TaskEventOutcome</a></code>
                                    </td>

                                    <td>
                                        No
                                    </td>


                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                    </div>
                    <div class="io-description">
                        
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="validateDynamicEnumField"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>validateDynamicEnumField</b></span>
                        <a href="#validateDynamicEnumField"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>validateDynamicEnumField()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="162"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:162</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">

                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="validateTaskData"></a>
                    <span class="name">
                        <span class="modifier">Public</span>
                        <span ><b>validateTaskData</b></span>
                        <a href="#validateTaskData"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                    <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>validateTaskData()</code>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-line">Defined in <a href="" data-line="134"
                            class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:134</a></div>
                </td>
            </tr>


            <tr>
                <td class="col-md-4">
                    <div class="io-description"><p>Checks the validity of all data fields in the managed <a href="../interfaces/Task.html">Task</a>.</p>
<p>If some of the fields are invalid touches them so their validation errors will appear (if set).
A snackbar will also be displayed to the user, informing them of the fact that the fields are invalid.</p>
</div>

                    <div>
                    </div>
                    <div class="io-description">
                        <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                    </div>
                    <div class="io-description">
                        <p>whether the task is valid or not</p>

                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>
            <section>
    
    <h3 id="inputs">
        Properties
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_isExpanding$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_isExpanding$</b></span>
                        <a href="#_isExpanding$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/Behavior.html" target="_self" >BehaviorSubject&lt;boolean&gt;</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="37" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:37</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_task"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_task</b></span>
                        <a href="#_task"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/Task.html" target="_self" >Task</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="35" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:35</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="_taskDataReloadRequest$"></a>
                    <span class="name">
                            <span class="modifier">Protected</span>
                        <span ><b>_taskDataReloadRequest$</b></span>
                        <a href="#_taskDataReloadRequest$"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../miscellaneous/typealiases.html#FrontendActions" target="_self" >Subject&lt;FrontendActions&gt;</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="36" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:36</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="$shouldCreate"></a>
                    <span class="name">
                        <span ><b>$shouldCreate</b></span>
                        <a href="#$shouldCreate"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>    <code>ReplaySubject&lt;Array&lt;DataGroup&gt;&gt;</code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="33" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:33</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="$shouldCreateCounter"></a>
                    <span class="name">
                        <span ><b>$shouldCreateCounter</b></span>
                        <a href="#$shouldCreateCounter"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
                <tr>
                    <td class="col-md-4">
                        <i>Type : </i>        <code><a href="../interfaces/Behavior.html" target="_self" >BehaviorSubject&lt;number&gt;</a></code>

                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="34" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:34</a></div>
                        </td>
                    </tr>


        </tbody>
    </table>
</section>

            <section>
    <h3 id="accessors">
        Accessors
    </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="task"></a>
                        <span class="name"><b>task</b><a href="#task"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>task()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="65" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:65</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">

                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="../interfaces/Task.html" target="_self" >Task | undefined</a></code>

                                </div>
                        </td>
                    </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>set</b><code>task(task: <a href="../interfaces/Task.html" target="_self">Task</a>)</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="71" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:71</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Setting a Task also emits it into the stream accessible by the <a href="../injectables/TaskContentService.html#task$">task$</a> getter method.</p>
</div>

                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <table class="params">
                                            <thead>
                                                <tr>
                                                    <td>Name</td>
                                                        <td>Type</td>
                                                    <td>Optional</td>
                                                        <td>Description</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                    <tr>
                                                            <td>task</td>
                                                    
                                                            <td>
                                                                            <code><a href="../interfaces/Task.html" target="_self" >Task</a></code>
                                                            </td>
                                                    
                                                        <td>
                                                                No
                                                        </td>
                                                        
                                                            <td>
                                                                    <code><p>the Task that owns the content managed by this service</p>
</code>
                                                            </td>
                                                    </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                                </div>
                        </td>
                    </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="task$"></a>
                        <span class="name"><b>task$</b><a href="#task$"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>task$()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="78" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:78</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Stream returns a <a href="../interfaces/Task.html">Task</a> object every time this object is set.</p>
<p>Use <a href="../injectables/TaskContentService.html#task">task</a> setter method to set the Task.</p>
</div>

                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="../interfaces/Task.html" target="_self" >Observable&lt;Task&gt;</a></code>

                                </div>
                        </td>
                    </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="taskDataReloadRequest$"></a>
                        <span class="name"><b>taskDataReloadRequest$</b><a href="#taskDataReloadRequest$"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>taskDataReloadRequest$()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="83" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:83</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Stream that emits every time a data reload is requested.</p>
</div>

                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="../miscellaneous/typealiases.html#FrontendActions" target="_self" >Observable&lt;FrontendActions&gt;</a></code>

                                </div>
                        </td>
                    </tr>

            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="taskFieldsIndex"></a>
                        <span class="name"><b>taskFieldsIndex</b><a href="#taskFieldsIndex"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>taskFieldsIndex()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="88" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:88</a></div>
                                </td>
                            </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>set</b><code>taskFieldsIndex(value: literal type)</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="92" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:92</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">

                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <table class="params">
                                            <thead>
                                                <tr>
                                                    <td>Name</td>
                                                        <td>Type</td>
                                                    <td>Optional</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                    <tr>
                                                            <td>value</td>
                                                    
                                                            <td>
                                                                        <code>literal type</code>
                                                            </td>
                                                    
                                                        <td>
                                                                No
                                                        </td>
                                                        
                                                    </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                                </div>
                        </td>
                    </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="referencedTaskAndCaseIds"></a>
                        <span class="name"><b>referencedTaskAndCaseIds</b><a href="#referencedTaskAndCaseIds"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>referencedTaskAndCaseIds()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="96" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:96</a></div>
                                </td>
                            </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>set</b><code>referencedTaskAndCaseIds(value: literal type)</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="100" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:100</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">

                                <div class="io-description">
                                        <b>Parameters :</b>
                                        <table class="params">
                                            <thead>
                                                <tr>
                                                    <td>Name</td>
                                                        <td>Type</td>
                                                    <td>Optional</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                    <tr>
                                                            <td>value</td>
                                                    
                                                            <td>
                                                                        <code>literal type</code>
                                                            </td>
                                                    
                                                        <td>
                                                                No
                                                        </td>
                                                        
                                                    </tr>
                                            </tbody>
                                        </table>
                                </div>
                                <div>
                                </div>
                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" >void</a></code>

                                </div>
                        </td>
                    </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="isExpanding"></a>
                        <span class="name"><b>isExpanding</b><a href="#isExpanding"><span class="icon ion-ios-link"></span></a></span>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <span class="accessor"><b>get</b><code>isExpanding()</code></span>
                    </td>
                </tr>
                            <tr>
                                <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="109" class="link-to-prism">projects/netgrif-components-core/src/lib/task-content/services/task-content.service.ts:109</a></div>
                                </td>
                            </tr>
                    <tr>
                        <td class="col-md-4">
                                <div class="io-description"><p>Whether the panel that the task content is contained in is currently expanding.</p>
<p>If the task content is not contained in a panel, <code>isExpanding</code> will be always <code>false</code>.</p>
</div>

                                <div class="io-description">
                                    <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                                </div>
                        </td>
                    </tr>

            </tbody>
        </table>
</section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Injectable, OnDestroy} from &#x27;@angular/core&#x27;;
import {DataGroup} from &#x27;../../resources/interface/data-groups&#x27;;
import {BehaviorSubject, Observable, ReplaySubject, Subject, timer} from &#x27;rxjs&#x27;;
import {Task} from &#x27;../../resources/interface/task&#x27;;
import {LoggerService} from &#x27;../../logger/services/logger.service&#x27;;
import {SnackBarService} from &#x27;../../snack-bar/services/snack-bar.service&#x27;;
import {TranslateService} from &#x27;@ngx-translate/core&#x27;;
import {EnumerationField, EnumerationFieldValue} from &#x27;../../data-fields/enumeration-field/models/enumeration-field&#x27;;
import {MultichoiceField} from &#x27;../../data-fields/multichoice-field/models/multichoice-field&#x27;;
import {Change, ChangedFields, FrontendActions} from &#x27;../../data-fields/models/changed-fields&#x27;;
import {FieldConverterService} from &#x27;./field-converter.service&#x27;;
import {FieldTypeResource} from &#x27;../model/field-type-resource&#x27;;
import {DynamicEnumerationField} from &#x27;../../data-fields/enumeration-field/models/dynamic-enumeration-field&#x27;;
import {Validation} from &#x27;../../data-fields/models/validation&#x27;;
import {TaskEventOutcome} from &#x27;../../event/model/event-outcomes/task-outcomes/task-event-outcome&#x27;;
import {DataField} from &#x27;../../data-fields/models/abstract-data-field&#x27;;
import {TaskFields} from &#x27;../model/task-fields&#x27;;

/**
 * Acts as a communication interface between the Component that renders Task content and it&#x27;s parent Component.
 * Also provides some general functionality that is needed when working with task content.
 *
 * Notable example of a parent Component is the {@link AbstractTaskPanelComponent}.
 *
 * Notable example of a task content renderer is the {@link AbstractTaskContentComponent}.
 */
@Injectable()
export abstract class TaskContentService implements OnDestroy {

    private static readonly FRONTEND_ACTIONS_KEY &#x3D; &#x27;_frontend_actions&#x27;;
    private static readonly VALIDATE_FRONTEND_ACTION &#x3D; &#x27;validate&#x27;;

    $shouldCreate: ReplaySubject&lt;Array&lt;DataGroup&gt;&gt;;
    $shouldCreateCounter: BehaviorSubject&lt;number&gt;;
    protected _task: Task;
    protected _taskDataReloadRequest$: Subject&lt;FrontendActions&gt;;
    protected _isExpanding$: BehaviorSubject&lt;boolean&gt;;
    private _taskFieldsIndex: {
        [taskId: string]: TaskFields
    } &#x3D; {};
    private _referencedTaskAndCaseIds: { [caseId: string]: Array&lt;string&gt; } &#x3D; {};

    protected constructor(protected _fieldConverterService: FieldConverterService,
                          protected _snackBarService: SnackBarService,
                          protected _translate: TranslateService,
                          protected _logger: LoggerService) {
        this.$shouldCreate &#x3D; new ReplaySubject&lt;Array&lt;DataGroup&gt;&gt;(1);
        this.$shouldCreateCounter &#x3D; new BehaviorSubject&lt;number&gt;(0);
        this._isExpanding$ &#x3D; new BehaviorSubject&lt;boolean&gt;(false);
        this._task &#x3D; undefined;
        this._taskDataReloadRequest$ &#x3D; new Subject&lt;FrontendActions&gt;();
    }

    ngOnDestroy(): void {
        if (!this.$shouldCreate.closed) {
            this.$shouldCreate.complete();
        }
        this._taskDataReloadRequest$.complete();
        this._isExpanding$.complete();
    }

    /**
     * @returns the Task object if set and &#x60;undefined&#x60; otherwise
     */
    public abstract get task(): Task | undefined;

    /**
     * Setting a Task also emits it into the stream accessible by the [task$]{@link TaskContentService#task$} getter method.
     * @param task the Task that owns the content managed by this service
     */
    public abstract set task(task: Task);

    /**
     * Stream returns a {@link Task} object every time this object is set.
     *
     * Use [task]{@link TaskContentService#task} setter method to set the Task.
     */
    public abstract get task$(): Observable&lt;Task&gt;;

    /**
     * Stream that emits every time a data reload is requested.
     */
    public get taskDataReloadRequest$(): Observable&lt;FrontendActions&gt; {
        return this._taskDataReloadRequest$.asObservable();
    }


    get taskFieldsIndex(): { [p: string]: TaskFields } {
        return this._taskFieldsIndex;
    }

    set taskFieldsIndex(value: { [p: string]: TaskFields }) {
        this._taskFieldsIndex &#x3D; value;
    }

    get referencedTaskAndCaseIds(): { [p: string]: Array&lt;string&gt; } {
        return this._referencedTaskAndCaseIds;
    }

    set referencedTaskAndCaseIds(value: { [p: string]: Array&lt;string&gt; }) {
        this._referencedTaskAndCaseIds &#x3D; value;
    }

    /**
     * Whether the panel that the task content is contained in is currently expanding.
     *
     * If the task content is not contained in a panel, &#x60;isExpanding&#x60; will be always &#x60;false&#x60;.
     */
    public get isExpanding(): boolean {
        return this._isExpanding$.value;
    }

    /**
     * Changes the state of the task content to &#x60;expanding&#x60;.
     */
    public expansionStarted(): void {
        this._isExpanding$.next(true);
    }

    /**
     * Changes the state of the task content to &#x60;not expanding&#x60;.
     */
    public expansionFinished(): void {
        this._isExpanding$.next(false);
    }

    /**
     * Checks the validity of all data fields in the managed {@link Task}.
     *
     * If some of the fields are invalid touches them so their validation errors will appear (if set).
     * A snackbar will also be displayed to the user, informing them of the fact that the fields are invalid.
     * @returns whether the task is valid or not
     */
    public validateTaskData(): boolean {
        if (!this._task || !this._task.dataGroups) {
            return false;
        }
        const valid &#x3D; !this._task.dataGroups.some(group &#x3D;&gt; group.fields.some(field &#x3D;&gt; !field.valid &amp;&amp; !field.disabled));
        const validDisabled &#x3D; !this._task.dataGroups.some(group &#x3D;&gt; group.fields.some(field &#x3D;&gt; !field.validRequired &amp;&amp; field.disabled));
        if (!valid) {
            this._snackBarService.openErrorSnackBar(this._translate.instant(&#x27;tasks.snackbar.invalidData&#x27;));
            this._task.dataGroups.forEach(group &#x3D;&gt; group.fields.forEach(field &#x3D;&gt; field.touch &#x3D; true));
        }
        if (!validDisabled) {
            this._snackBarService.openErrorSnackBar(this._translate.instant(&#x27;tasks.snackbar.missingRequired&#x27;));
        }
        return valid &amp;&amp; validDisabled;
    }

    /**
     * Finds invalid data of task
     *
     * @returns array of invalid datafields
     */
    public getInvalidTaskData(): Array&lt;DataField&lt;any&gt;&gt; {
        const invalidFields &#x3D; [];
        this._task.dataGroups.forEach(group &#x3D;&gt; invalidFields.push(...group.fields.filter(field &#x3D;&gt;
            (!field.valid &amp;&amp; !field.disabled) || (!field.validRequired &amp;&amp; !field.disabled))));
        return invalidFields;
    }

    public validateDynamicEnumField(): boolean {
        if (!this._task || !this._task.dataGroups) {
            return false;
        }
        const exists &#x3D; this._task.dataGroups.some(group &#x3D;&gt; group.fields.some(field &#x3D;&gt; field instanceof DynamicEnumerationField));
        if (!exists) {
            return true;
        }
        let valid &#x3D; true;
        for (const group of this._task.dataGroups) {
            for (const field of group.fields) {
                if (field instanceof DynamicEnumerationField) {
                    if (field.choices !&#x3D;&#x3D; undefined &amp;&amp; field.choices.length !&#x3D;&#x3D; 0 &amp;&amp; field.value !&#x3D;&#x3D; &#x27;&#x27; &amp;&amp; field.value !&#x3D;&#x3D; undefined) {
                        if (!field.choices.some(choice &#x3D;&gt; choice.key &#x3D;&#x3D;&#x3D; field.value)) {
                            field.value &#x3D; &#x27;&#x27;;
                            if (field.behavior.required) {
                                valid &#x3D; false;
                            }
                        }
                    }
                }
            }
        }
        if (!valid) {
            this._snackBarService.openErrorSnackBar(this._translate.instant(&#x27;tasks.snackbar.missingRequired&#x27;));
        }
        return valid;
    }

    /**
     * Changes the blocking state of all fields in the managed Task.
     * @param blockingState whether the field should be blocked or not
     */
    public blockFields(blockingState: boolean): void {
        if (this._task &amp;&amp; this._task.dataGroups) {
            this._task.dataGroups.forEach(group &#x3D;&gt; {
                group.fields.forEach(field &#x3D;&gt; {
                    field.block &#x3D; blockingState;
                });
            });
        }
    }

    /**
     * Clears the assignee, start date and finish date from the managed Task.
     */
    public updateStateData(eventOutcome: TaskEventOutcome): void {
        if (this._task) {
            this._task.user &#x3D; eventOutcome.task.user;
            this._task.startDate &#x3D; eventOutcome.task.startDate;
            this._task.finishDate &#x3D; eventOutcome.task.finishDate;
        }
    }

    /**
     * Updates the properties of fields in the managed task based on a delta of changes from previous state.
     * @param chFields object containing the delta of the changes from the previous state
     */
    public updateFromChangedFields(chFields: ChangedFields): void {
        if (!this._task || !this._task.dataGroups) {
            return;
        }
        // todo actions owner zbytočný?
        const frontendActions &#x3D; chFields.taskId &#x3D;&#x3D;&#x3D; this.task.stringId &amp;&amp; chFields[TaskContentService.FRONTEND_ACTIONS_KEY];

        Object.keys(chFields).forEach(changedField &#x3D;&gt; {
            if (!!this.taskFieldsIndex[chFields.taskId] &amp;&amp; !!this.taskFieldsIndex[chFields.taskId].fields
                &amp;&amp; !!this.taskFieldsIndex[chFields.taskId].fields[changedField]) {
                this.updateField(chFields, this.taskFieldsIndex[chFields.taskId].fields[changedField], frontendActions);
            } else if (this.isFieldInTaskRef(changedField)) {
                const taskId &#x3D; this.getReferencedTaskId(changedField);
                if (!!taskId &amp;&amp; !!this.taskFieldsIndex[taskId] &amp;&amp; !!this.taskFieldsIndex[taskId].fields
                    &amp;&amp; !!this.taskFieldsIndex[taskId].fields[changedField])
                    this.updateReferencedField(chFields, this.taskFieldsIndex[taskId].fields[changedField], frontendActions);
            }
        });

        this.$shouldCreate.next(this._task.dataGroups);
        this.performFrontendAction(frontendActions);
    }

    private updateField(chFields: ChangedFields, field: DataField&lt;any&gt;, frontendActions: Change): void {
        if (this._fieldConverterService.resolveType(field) &#x3D;&#x3D;&#x3D; FieldTypeResource.TASK_REF) {
            this._taskDataReloadRequest$.next(frontendActions ? frontendActions : undefined);
            return;
        }

        const updatedField &#x3D; chFields[field.stringId];
        Object.keys(updatedField).forEach(key &#x3D;&gt; {
            switch (key) {
                case &#x27;type&#x27;:
                    // type is just an information, not an update. A field cannot change its type
                    return; // continue - the field does not need updating, since nothing changed
                case &#x27;value&#x27;:
                    field.valueWithoutChange(this._fieldConverterService.formatValueFromBackend(field, updatedField[key]));
                    break;
                case &#x27;behavior&#x27;:
                    if (updatedField.behavior[this._task.transitionId]) {
                        // TODO NGSD-489 fix behavior resolution
                        field.behavior &#x3D; updatedField.behavior[this._task.transitionId];
                    } else {
                        const transitionId &#x3D; this.getReferencedTransitionId(field.stringId);
                        if (!!transitionId &amp;&amp; transitionId !&#x3D;&#x3D; &#x27;&#x27; &amp;&amp; updatedField.behavior[transitionId])
                            field.behavior &#x3D; updatedField.behavior[transitionId];
                        break;
                    }
                    break;
                case &#x27;choices&#x27;:
                    const newChoices: Array&lt;EnumerationFieldValue&gt; &#x3D; [];
                    if (updatedField.choices instanceof Array) {
                        updatedField.choices.forEach(it &#x3D;&gt; {
                            newChoices.push({key: it, value: it} as EnumerationFieldValue);
                        });
                    } else {
                        Object.keys(updatedField.choices).forEach(choiceKey &#x3D;&gt; {
                            newChoices.push({
                                key: choiceKey,
                                value: updatedField.choices[choiceKey]
                            } as EnumerationFieldValue);
                        });
                    }
                    (field as EnumerationField | MultichoiceField).choices &#x3D; newChoices;
                    break;
                case &#x27;options&#x27;:
                    const newOptions &#x3D; [];
                    Object.keys(updatedField.options).forEach(optionKey &#x3D;&gt; {
                        newOptions.push({key: optionKey, value: updatedField.options[optionKey]});
                    });
                    (field as EnumerationField | MultichoiceField).choices &#x3D; newOptions;
                    break;
                case &#x27;validations&#x27;:
                    field.replaceValidations(updatedField.validations.map(it &#x3D;&gt; (it as Validation)));
                    break;
                default:
                    field[key] &#x3D; updatedField[key];

            }
            field.update();
        });
    }

    private updateReferencedField(chFields: ChangedFields, field: DataField&lt;any&gt;, frontendActions: Change): void {
        if (this._fieldConverterService.resolveType(field) &#x3D;&#x3D;&#x3D; FieldTypeResource.TASK_REF) {
            this._taskDataReloadRequest$.next(frontendActions ? frontendActions : undefined);
            return;
        }
        const updatedField &#x3D; chFields[field.stringId];
        Object.keys(updatedField).forEach(key &#x3D;&gt; {
            switch (key) {
                case &#x27;behavior&#x27;:
                    const transitionId &#x3D; this.getReferencedTransitionId(field.stringId);
                    if (!!transitionId &amp;&amp; transitionId !&#x3D;&#x3D; &#x27;&#x27; &amp;&amp; updatedField.behavior[transitionId])
                        field.behavior &#x3D; updatedField.behavior[transitionId];
                    break;
                default:
                    field[key] &#x3D; updatedField[key];
            }
            field.update();
        });
    }

    /**
     * Performs the specific frontend action.
     *
     * A prototype implementation of frontend actions.
     *
     * The specifics are subject to change. It is very likely that this method will be moved to a different service.
     *
     * @param frontendAction the action that should be performed.
     */
    public performFrontendAction(frontendAction: FrontendActions): void {
        if (frontendAction &amp;&amp; frontendAction.type &#x3D;&#x3D;&#x3D; TaskContentService.VALIDATE_FRONTEND_ACTION) {
            timer().subscribe(() &#x3D;&gt; this.validateTaskData());
        }
    }

    public getReferencedFieldTask(field): string {
        return Object.keys(this.taskFieldsIndex).find(taskId &#x3D;&gt; Object.keys(this.taskFieldsIndex[taskId].fields).includes(field));
    }

    private isFieldInTaskRef(changedField: string): boolean {
        return !!this.taskFieldsIndex &amp;&amp;
            Object.keys(this.taskFieldsIndex)
                .some(taskId &#x3D;&gt; taskId !&#x3D;&#x3D; this.task.stringId &amp;&amp; this.taskFieldsIndex[taskId].fields[changedField]);
    }

    private getReferencedTransitionId(changedField: string): string {
        if (!!this.taskFieldsIndex) {
            const taskFieldsIndexId &#x3D; this.getReferencedFieldTask(changedField);
            return this.taskFieldsIndex[taskFieldsIndexId].transitionId;
        }
        return undefined;
    }

    private getReferencedTaskId(changedField: string): string {
        if (!!this.taskFieldsIndex) {
            return Object.keys(this.taskFieldsIndex).find(taskId &#x3D;&gt;
                Object.keys(this.taskFieldsIndex[taskId].fields).includes(changedField));
        }
        return undefined;
    }
}
</code></pre>
    </div>

</div>







                   




                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'TaskContentService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       
       <script type="module" src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
