<nc-data-field-template *ngIf='!dataField.behavior.hidden'
                        [dataField]='dataField'
                        [dataFieldTemplate]='dataFieldTemplate'
                        [offset]='taskOffset'>
</nc-data-field-template>

<ng-template #dataFieldTemplate let-showLargeLayout='showLargeLayout'>
    <mat-form-field [appearance]="dataField.materialAppearance" class="full-width" [ngClass]="{'netgrif-chip-fix' : dataField.value?.userValues?.size > 0}" color="primary">
        <mat-label class="netgrif-label" [ngClass]="{'netgrif-label-disabled': formControl.disabled}" *ngIf="!showLargeLayout.value">{{dataField.title}}</mat-label>
        <button mat-icon-button matPrefix
                [disabled]="formControl.disabled"
                color="primary"
                (click)="selectUser()"
                [matTooltip]="'dataField.user.selectUser' | translate"
                [class.do-not-click]="formControl.disabled">
            <mat-icon>how_to_reg</mat-icon>
        </button>
        <mat-chip-list #chipList aria-label="Autocomplete" [formControl]="formControl">
            <mat-chip
                *ngFor='let user of dataField.value.userValues | keyvalue' (removed)="deleteUser(user.key)">
                {{user.value.fullName}}
                <button *ngIf="!formControl.disabled" matChipRemove>
                    <mat-icon>cancel</mat-icon>
                </button>
            </mat-chip>
            <input
                aria-label="Autocomplete"
                matInput
                #input
                [placeholder]="dataField.placeholder"
                [required]="dataField.behavior.required"
                [matChipInputFor]="chipList">
        </mat-chip-list>
        <mat-hint [ngClass]="{'mat-hint-disabled': formControl.disabled}">{{dataField.description}}</mat-hint>
        <mat-error *ngIf='dataField.isInvalid(formControl)'>{{'dataField.validations.required' | translate}}</mat-error>
    </mat-form-field>
</ng-template>
